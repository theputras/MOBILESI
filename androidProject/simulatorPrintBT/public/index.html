<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>POS Controller</title>
    <style>
        body { font-family: sans-serif; padding: 20px; max-width: 500px; margin: 0 auto; }
        input, select, button { width: 100%; padding: 10px; margin-bottom: 10px; box-sizing: border-box; }
        button { background-color: #007bff; color: white; border: none; cursor: pointer; }
        button:hover { background-color: #0056b3; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
    </style>
</head>
<body>
    <h2>Kirim ke Printer</h2>
    
    <input type="text" id="textInput" placeholder="Masukkan teks struk..." autofocus>
    
    <div class="grid">
        <select id="align">
            <option value="left">Rata Kiri</option>
            <option value="center">Tengah</option>
            <option value="right">Rata Kanan</option>
        </select>
        
        <select id="style">
            <option value="normal">Normal</option>
            <option value="bold">Tebal</option>
        </select>
    </div>

    <button onclick="printText()">PRINT</button>
    <button onclick="printSeparator()" style="background-color: #666;">-- GARIS PEMISAH --</button>
    <button onclick="printFeed()" style="background-color: #28a745;">FEED (SPASI)</button>

    <script src="/socket.io/socket.io.js"></script>
    <script>
        const socket = io();

        function printText() {
            const text = document.getElementById('textInput').value;
            const align = document.getElementById('align').value;
            const isBold = document.getElementById('style').value === 'bold';

            if (text.trim() === "") return;

            socket.emit('send-print', {
                text: text,
                align: align,
                bold: isBold
            });

            document.getElementById('textInput').value = '';
            document.getElementById('textInput').focus();
        }

        function printSeparator() {
            socket.emit('send-print', { text: '------------------------------', align: 'center', bold: false });
        }
        
        function printFeed() {
             socket.emit('send-print', { text: ' ', align: 'left', bold: false });
             socket.emit('send-print', { text: ' ', align: 'left', bold: false });
        }

        // Enter key untuk print
        document.getElementById('textInput').addEventListener("keypress", function(event) {
            if (event.key === "Enter") {
                printText();
            }
        });
    </script>
</body>
</html>